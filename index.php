<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brief-12</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>

<body>

    <div class="container text-center mt-3">
        <form method="POST">

            <div class="row">

                <!-- :::::::::::::::::::::: Table of content :::::::::::::::::::::: -->

                <div class="col-sm">
                    <table class="table table-bordered mb-1">
                        <thead>
                            <tr>
                                <th class="col-3 p-0">23 NOV - 11:00 H.</th>
                                <th class="col-2 p-0">Score</th>
                                <th class="col-3 p-0">MATCH 9</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/ma.svg" width="48" class="m-2"><br>Morocco</td>
                                <td>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="firstScore" class="form-control">
                                    </div>
                                    <p class="d-inline-block">-</p>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="secondScore" class="form-control">
                                    </div>
                                </td>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/hr.svg" width="48" class="m-2"><br>Croatia</td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-bordered mb-1">
                        <thead>
                            <tr>
                                <th class="col-3 p-0">23 NOV - 20:00 H.</th>
                                <th class="col-2 p-0">Score</th>
                                <th class="col-3 p-0">MATCH 12</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/be.svg" width="48" class="m-2"><br>Belgium</td>
                                <td>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="thirdScore" class="form-control">
                                    </div>
                                    <p class="d-inline-block">-</p>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="fourthScore" class="form-control">
                                    </div>
                                </td>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/ca.svg" width="48" class="m-2"><br>Canada</td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-bordered mb-1">

                        <thead>
                            <tr>
                                <th class="col-3 p-0">27 NOV - 14:00 H.</th>
                                <th class="col-2 p-0">Score</th>
                                <th class="col-3 p-0">MATCH 26</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/be.svg" width="48" class="m-2"><br>Belgium</td>
                                <td>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="fifthScore" class="form-control">
                                    </div>
                                    <p class="d-inline-block">-</p>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="sixthScore" class="form-control">
                                    </div>
                                </td>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/ma.svg" width="48" class="m-2"><br>Morocco</td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-bordered mb-1">

                        <thead>
                            <tr>
                                <th class="col-3 p-0">27 NOV - 17:00 H.</th>
                                <th class="col-2 p-0">Score</th>
                                <th class="col-3 p-0">MATCH 27</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/hr.svg" width="48" class="m-2"><br>Croatia</td>
                                <td>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="seventhScore" class="form-control">
                                    </div>
                                    <p class="d-inline-block">-</p>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="eighthScore" class="form-control">
                                    </div>
                                </td>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/ca.svg" width="48" class="m-2"><br>Canada</td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-bordered mb-1">

                        <thead>
                            <tr>
                                <th class="col-3 p-0">01 DEC - 16:00 H.</th>
                                <th class="col-2 p-0">Score</th>
                                <th class="col-3 p-0">MATCH 41</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/hr.svg" width="48" class="m-2"><br>Croatia</td>
                                <td>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="ninthScore" class="form-control">
                                    </div>
                                    <p class="d-inline-block">-</p>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="tenthScore" class="form-control">
                                    </div>
                                </td>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/be.svg" width="48" class="m-2"><br>Belgium</td>
                            </tr>
                        </tbody>
                    </table>

                    <table class="table table-bordered mb-1">

                        <thead>
                            <tr>
                                <th class="col-3 p-0">01 DEC - 16:00 H.</th>
                                <th class="col-2 p-0">Score</th>
                                <th class="col-3 p-0">MATCH 42</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/ca.svg" width="48" class="m-2"><br>Canada</td>
                                <td>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="eleventhScore" class="form-control">
                                    </div>
                                    <p class="d-inline-block">-</p>
                                    <div class="d-inline-block" style="width: 3rem;">
                                        <input type="number" name="twelvethScore" class="form-control">
                                    </div>
                                </td>
                                <td><img src="https://hatscripts.github.io/circle-flags/flags/ma.svg" width="48" class="m-2"><br>Morocco</td>
                            </tr>

                        </tbody>
                    </table>
                </div>

                <!-- :::::::::::::::::::::: Table of results :::::::::::::::::::::: -->

                <div class="col-sm">
                    <?php

                    if (isset($_POST['submitButton'])) {

                        $pointsArray = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);
                        $matchesArray = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);
                        $drawArray = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);
                        $winArray = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);
                        $loseArray = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);
                        $goalsFor = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);
                        $goalsAgainst = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);
                        $goalsDifference = array("Morocco" => 0, "Croatia" => 0, "Belgium" => 0, "Canada" => 0);

                        $firstValue = $_POST["firstScore"];
                        $secondValue = $_POST["secondScore"];
                        $thirdValue = $_POST["thirdScore"];
                        $fourthValue = $_POST["fourthScore"];
                        $fifthValue = $_POST["fifthScore"];
                        $sixthValue = $_POST["sixthScore"];
                        $seventhValue = $_POST["seventhScore"];
                        $eighthValue = $_POST["eighthScore"];
                        $ninthValue = $_POST["ninthScore"];
                        $tenthValue = $_POST["tenthScore"];
                        $eleventhValue = $_POST["eleventhScore"];
                        $twelvethValue = $_POST["twelvethScore"];

                        if ($firstValue == "") $firstValue = 0;
                        if ($secondValue == "") $secondValue = 0;
                        if ($thirdValue == "") $thirdValue = 0;
                        if ($fourthValue == "") $fourthValue = 0;
                        if ($fifthValue == "") $fifthValue = 0;
                        if ($sixthValue == "") $sixthValue = 0;
                        if ($seventhValue == "") $seventhValue = 0;
                        if ($eighthValue == "") $eighthValue = 0;
                        if ($ninthValue == "") $ninthValue = 0;
                        if ($tenthValue == "") $tenthValue = 0;
                        if ($eleventhValue == "") $eleventhValue = 0;
                        if ($twelvethValue == "") $twelvethValue = 0;

                        // :::::::::::::::::::::: win & lose & draw Cases ::::::::::::::::::::::

                        function comparingScores($team1, $team2, $value1, $value2) {

                            global $matchesArray, $winArray, $drawArray, $loseArray;

                            if ($value1 > $value2) {
                                $winArray[$team1]++;
                                $loseArray[$team2]++;
                                $matchesArray[$team2]++;
                                $matchesArray[$team1]++;
                            } elseif ($value1 < $value2) {
                                $winArray[$team2]++;
                                $loseArray[$team1]++;
                                $matchesArray[$team2]++;
                                $matchesArray[$team1]++;
                            } else {
                                $drawArray[$team1]++;
                                $drawArray[$team2]++;
                                $matchesArray[$team2]++;
                                $matchesArray[$team1]++;
                            };
                        };

                        comparingScores("Morocco", "Croatia", $firstValue, $secondValue);
                        comparingScores("Belgium", "Canada", $thirdValue, $fourthValue);
                        comparingScores("Belgium", "Morocco", $fifthValue, $sixthValue);
                        comparingScores("Croatia", "Canada", $seventhValue, $eighthValue);
                        comparingScores("Croatia", "Belgium", $ninthValue, $tenthValue);
                        comparingScores("Canada", "Morocco", $eleventhValue, $twelvethValue);

                        // :::::::::::::::::::::: General points & Goals for & Goals against & Goals difference ::::::::::::::::::::::

                        $pointsArray["Morocco"] = $winArray["Morocco"] * 3 + $drawArray["Morocco"];
                        $pointsArray["Croatia"] = $winArray["Croatia"] * 3 + $drawArray["Croatia"];
                        $pointsArray["Belgium"] = $winArray["Belgium"] * 3 + $drawArray["Belgium"];
                        $pointsArray["Canada"] = $winArray["Canada"] * 3 + $drawArray["Canada"];

                        $goalsFor["Morocco"] = $firstValue + $sixthValue + $twelvethValue;
                        $goalsFor["Croatia"] = $secondValue + $seventhValue + $ninthValue;
                        $goalsFor["Belgium"] = $thirdValue + $fifthValue + $tenthValue;
                        $goalsFor["Canada"] = $fourthValue + $eighthValue + $eleventhValue;

                        $goalsAgainst["Morocco"] = $secondValue + $fifthValue + $eleventhValue;
                        $goalsAgainst["Croatia"] = $firstValue + $eighthValue + $tenthValue;
                        $goalsAgainst["Belgium"] = $fourthValue + $sixthValue + $ninthValue;
                        $goalsAgainst["Canada"] = $thirdValue + $seventhValue + $twelvethValue;

                        $goalsDifference["Morocco"] = $goalsFor["Morocco"] - $goalsAgainst["Morocco"];
                        $goalsDifference["Croatia"] = $goalsFor["Croatia"] - $goalsAgainst["Croatia"];
                        $goalsDifference["Belgium"] = $goalsFor["Belgium"] - $goalsAgainst["Belgium"];
                        $goalsDifference["Canada"] = $goalsFor["Canada"] - $goalsAgainst["Canada"];

                        // :::::::::::::::::::::: Sorting ::::::::::::::::::::::

                        arsort($pointsArray);
                        arsort($goalsDifference);
                        arsort($goalsFor);

                        $firstTeam = array_keys($pointsArray)[0];
                        $secondTeam = array_keys($pointsArray)[1];
                        $thirdTeam = array_keys($pointsArray)[2];
                        $fourthTeam = array_keys($pointsArray)[3];

                        if (count($pointsArray) !== count(array_unique($pointsArray))) {

                            echo "Some duplicates";

                            $firstTeam = array_keys($goalsDifference)[0];
                            $secondTeam = array_keys($goalsDifference)[1];
                            $thirdTeam = array_keys($goalsDifference)[2];
                            $fourthTeam = array_keys($goalsDifference)[3];
                            
                            if (count($goalsDifference) !== count(array_unique($goalsDifference))) {
                                    
                                echo "<br>";
                                echo "Some duplicates in goals differences";
    
                                $firstTeam = array_keys($goalsFor)[0];
                                $secondTeam = array_keys($goalsFor)[1];
                                $thirdTeam = array_keys($goalsFor)[2];
                                $fourthTeam = array_keys($goalsFor)[3];
                            };
                        };


                        echo "<br>";
                        echo (array_values($pointsArray)[0]);
                        echo "<br>";
                        echo (array_values($pointsArray)[1]);
                        echo "<br>";
                        echo (array_values($pointsArray)[2]);
                        echo "<br>";
                        echo (array_values($pointsArray)[3]);
                        echo "<br>";

                        // :::::::::::::::::::::: Seting the right flag ::::::::::::::::::::::

                        $firstTeamFlag = "";
                        $secondTeamFlag = "";
                        $thirdTeamFlag = "";
                        $fourthTeamFlag = "";

                        if ($firstTeam == "Morocco") $firstTeamFlag = "ma";
                        elseif ($firstTeam == "Croatia") $firstTeamFlag = "hr";
                        elseif ($firstTeam == "Belgium") $firstTeamFlag = "be";
                        else $firstTeamFlag = "ca";

                        if ($secondTeam == "Morocco") $secondTeamFlag = "ma";
                        elseif ($secondTeam == "Croatia") $secondTeamFlag = "hr";
                        elseif ($secondTeam == "Belgium") $secondTeamFlag = "be";
                        else $secondTeamFlag = "ca";

                        if ($thirdTeam == "Morocco") $thirdTeamFlag = "ma";
                        elseif ($thirdTeam == "Croatia") $thirdTeamFlag = "hr";
                        elseif ($thirdTeam == "Belgium") $thirdTeamFlag = "be";
                        else $thirdTeamFlag = "ca";

                        if ($fourthTeam == "Morocco") $fourthTeamFlag = "ma";
                        elseif ($fourthTeam == "Croatia") $fourthTeamFlag = "hr";
                        elseif ($fourthTeam == "Belgium") $fourthTeamFlag = "be";
                        else $fourthTeamFlag = "ca";

                        // :::::::::::::::::::::: Creating & Filling table with values ::::::::::::::::::::::

                        echo "<table class='table table-bordered'>
                        <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Teams</th>
                                    <th>PTS</th>
                                    <th>GP</th>
                                    <th>W</th>
                                    <th>D</th>
                                    <th>L</th>
                                    <th>GF</th>
                                    <th>GA</th>
                                    <th>+/-</th>
                                </tr>
                        </thead>";


                        echo "<tbody>";

                        function tableRow($targetedTeam, $targetedTeamFlag, $teamClassement) {

                            global $pointsArray, $matchesArray, $winArray, $drawArray, $loseArray, $goalsFor, $goalsAgainst;

                            return "<tr> <th>$teamClassement.</th> <td><img src='https://hatscripts.github.io/circle-flags/flags/$targetedTeamFlag.svg' width='48' class='m-2'><br>
                            $targetedTeam</td> <td>"
                                . $pointsArray[$targetedTeam] . "</td><td>"
                                . $matchesArray[$targetedTeam] . "</td><td>"
                                . $winArray[$targetedTeam] . "</td><td>"
                                . $drawArray[$targetedTeam] . "</td><td>"
                                . $loseArray[$targetedTeam] . "</td><td>"
                                . $goalsFor[$targetedTeam] . "</td><td>"
                                . $goalsAgainst[$targetedTeam] . "</td><td>"
                                . $goalsFor[$targetedTeam] - $goalsAgainst[$targetedTeam] . "</td></tr>";
                        };

                        echo tableRow($firstTeam, $firstTeamFlag, "1");
                        echo tableRow($secondTeam, $secondTeamFlag, "2");
                        echo tableRow($thirdTeam, $thirdTeamFlag, "3");
                        echo tableRow($fourthTeam, $fourthTeamFlag, "4");

                        echo "</tbody> </table>";
                    };

                    ?>
                    <input class="btn btn-primary" type="submit" name="submitButton" value="Submit">
                </div>

            </div>

        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</body>

</html>